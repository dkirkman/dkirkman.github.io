webpackJsonp([25236774834544],{210:function(e,t){e.exports={data:{site:{siteMetadata:{title:"Wild Silicon",subtitle:"David's development blog",copyright:"Copyright © 2018 David Kirkman. All rights reserved.",author:{name:"David Kirkman",twitter:"#"},disqusShortname:"",url:"https://wildsilicon.com"}},markdownRemark:{id:"/Users/david/src/wild-silicon/src/pages/blog/2018/colormap/index.md absPath of file >>> MarkdownRemark",htmlAst:{type:"root",children:[{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"In my last "},{type:"element",tagName:"a",properties:{href:"/blog/2018/demon/"},children:[{type:"text",value:"post"}]},{type:"text",value:" I gave the option of using a\nvariety of different colormaps.  The reason is because historically\nI’ve always favored plain grayscale colormaps.  I’ve always found that\n“color” colormaps grossly distort my data "},{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"and"}]},{type:"text",value:" make it considerably\nmore difficult to accurately identify features.  But a cyclical\ncellular automaton is, well, cyclic.  I can, of course, construct a\ncyclic grayscale map — and I did — but when you do so there is a\nsymmetry that it would be nice to break."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColorWheel",type:"cyclic-grayscale"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"This looks like a perfectly decent colormap to me, the only problem\nis how do I differentiate values on the left side of the wheel from\nvalues on the right side?  Luminosity alone is not enough, we’re going\nto need something else to vary."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"This symmetry could certainly be broken with color, for example with a\ncyclical version of the infamous rainbow map.  The classic way to generate\nit is to vary the channel intensities such that R, G, and B are fully\non for one third of the range, with the other colors either ramping up\nor ramping down."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapRGBPlot"},children:[]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"RGB channel intensities for the classic rainbow map."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColorWheel",type:"rainbow"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"The classic rainbow colormap rotates through all fully saturated\ncolors."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Because all of the colors in the classic rainbow map are fully\nsaturated the intensity of the colormap peaks at the secondary colors\nyellow, cyan, and purple.  At all three locations two of the RGB\nchannels are at their maximum values, and the result is that smooth\nfunctions will look like they have peaks at the secondary colors.\nThis is one of the reasons I’ve hated this colormap through the years.\nAnother closely related issue is that when I look at this map, I see\nsix colors: red, yellow, green, cyan, blue and purple.  But they\naren’t taking up approximately equal parts of the map.  There is a\nlarge red section, that transitions into a very narrow yellow section,\nfollowed by a large green section, followed by a narrow cyan section,\nand so on."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"One possible way to fix these deficiencies in the rainbow map would be\nto smooth out the transitions into and away from the secondary colors.\nAs shown below, one way would be to ramp up the guns with a sine function\ninstead of linearly."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapRGBPlot",trans:"sin"},children:[]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"One way to “improve” the classic rainbow map is to smooth out the transition\ninto and out of the secondary colors yellow, cyan, and purple."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Let’s call this sine ramp up “David’s kludgy rainbow”, because I employ\nthis kludge whenever I’m in a situation where I actually need a\ncolormap.  Of course, after seeing the results I always discard the\n“color” colormap and find some way to make it work with a grayscale."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColorWheel",type:"kludge-rainbow"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"My kludgy “fix” to the rainbow colormap.  The apparent spikes at the\nsecondary colors are gone, and the size of the six “colors” are more\nequal.  But in practice it doesn’t really work any better than the\noriginal rainbow and is an object lesson that amateurs should stay\naway from colormap design.  It is however, the rainbow map used in the\nDemon visualization."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"A lot of ink has been spilt explaining exactly how\n"},{type:"element",tagName:"a",properties:{href:"http://jakevdp.github.io/blog/2014/10/16/how-bad-is-your-colormap/"},children:[{type:"text",value:"bad"}]},{type:"text",value:"\nthe "},{type:"element",tagName:"a",properties:{href:"https://www.climate-lab-book.ac.uk/2014/end-of-the-rainbow/"},children:[{type:"text",value:"rainbow"}]},{type:"text",value:" colormap\nreally is, so it’s perhaps not too surprising that I aggressively\ndislike it.  Even better, since I last seriously considered using a\n“color” colormap a considerable amount of ink has been spilt\ndescribing better ways to construct them.  "},{type:"element",tagName:"a",properties:{href:"https://www.vis4.net/blog/2013/09/mastering-multi-hued-color-scales/"},children:[{type:"text",value:"Many"}]},{type:"text",value:"\nend up pointing back to Cynthia Brewer’s\n"},{type:"element",tagName:"a",properties:{href:"http://colorbrewer2.org/#type=sequential&scheme=BuGn&n=3"},children:[{type:"text",value:"colorbrewer"}]},{type:"text",value:".\nThe basic idea behind most proposals is to assert that the problem\nwith the rainbow map (or other traditional colormaps like Matlab’s Jet\nmap) is that euclidean distance in RGB space does not match human\nperception.  This is obviously true looking at the rainbow map — each\npoint is separated by an equal distance in RGB space yet perceptually\nwe transition through the secondary colors much more quickly than others."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The proposed solution is to produce maps with equidistant spacing in\nsome colorspace designed to match human perceptions.  Psycophysicists\nhave spent decades producing such a space, "},{type:"element",tagName:"a",properties:{href:"https://en.wikipedia.org/wiki/Lab_color_space#CIELAB"},children:[{type:"text",value:"CIE\nLab"}]},{type:"text",value:".  So if we\ntake paths through CIE Lab (or its polar variant HCL) we should end up\nwith perceptually uniform colormaps — meaning that each step on the\ncolormap will be perceived to be the same amount of different as any\nother step.  But I’m still not convinced that being perceptually\nuniform also means that they are generally suitable for extracting\nunbiased quantitative information."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"But whether or not they are actually a good idea, d3 now has\n"},{type:"element",tagName:"a",properties:{href:"https://github.com/d3/d3-scale-chromatic"},children:[{type:"text",value:"scale-chromatic"}]},{type:"text",value:" with a\ncouple of dozen new color scales, all of which look good, most of\nwhich are constructed to be perceptually uniform, and several of which\n(the viridis, inferno, magma, and plasma maps) seem to have been very\ncarefully designed.  There is even a cyclical map in scale-chromatic."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The pressing question for me is:  how do I work out if any of these\ncolormaps is actually any good?  Is there anything that can be done much\nbeyond drawing a heightmap of the world and saying, “yep, looks good”?\nWhat we need are test images with properties that enable us to objectively\nscrutinize a colormap.  If we step away from cyclical colormaps for the\nmoment, "},{type:"element",tagName:"a",properties:{href:"https://arxiv.org/abs/1509.03700"},children:[{type:"text",value:"Kovesi (2015)"}]},{type:"text",value:" provides us\nwith just such an image."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"grayscale"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"Kovesi’s image to evaluate colormaps.  Horizontally it’s a linear\nramp from 0 to 1, with a sine wave superimposed on top of it.  The sine\nwave has a period of 8 pixels, and a peak-to-value amplitude of 0.1 at\nthe top of the image.  Vertically, the amplitude of the sine wave in\nlinearly ramped down to zero by the bottom of the image."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"rainbow"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"Rainbow colormap applied to Kovesi’s image.  And now we’ve got some\nobjective evidence to back up our assertion that the rainbow colormap\nis rubbish."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"kludge-rainbow"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"The kludgy rainbow.  It’s a little better, but it’s still apparent that\nit’s not at all suitable for quantitative visualization."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Kovesi’s test image is useful for a couple of reasons.  As the\namplitude of the sine wave perturbation decreases at lower rows, it\nallows us to immediately evaluate how sensitive the color map is to\nsmall amplitude features.  More importantly, it allows us to determine\nif it is equally sensitive to small amplitude features at all points\nin the map.  For example, the large green area in the rainbow maps\nwhere most humans have trouble distinguishing small amplitude features\nis readily apparent."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The rapid oscillation of the sine wave is also designed to evaluate\nhow well a map works at highlighting features on small spatial scales.\nThis is important, because there is some evidence that perception of\ncolor is subtly different on small spatial scales compared to large\nones.  See Kovesi’s "},{type:"element",tagName:"a",properties:{href:"https://arxiv.org/abs/1509.03700"},children:[{type:"text",value:"paper"}]},{type:"text",value:" for background\nand references to the existing literature on this."}]},{type:"text",value:"\n"},{type:"element",tagName:"h2",properties:{},children:[{type:"text",value:"Are there colormaps that actually work?"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"So far we’ve worked out that the classic grayscale map is objectively good,\nand that the classic rainbow map is not.  The next obvious question would\nbe, are there “color” colormaps that are also objectively good?"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Not surprisingly, most of the d3 colormaps are excellent.  At the bottom of\nthis page there is an interactive explorer you can use to view all of the\ncolormaps in d3-scale-chromatic (as well as the other colormaps discussed\nin this post)."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"A few that caught my eye are:"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"bugn"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"BuGn colormap.  One of a large number of colormaps that smoothly transition\nfrom one color to another."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"inferno"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"Inferno colormap.  Part of a set including the viridis, magma and plasma\nmaps, inferno was carefully constructed to be perceptually uniform and to\npresent a continuous change in lightness.  While more “colorful” than simple\nmaps that transition from one color to another, the overall impression seems\ndominated by the continuous ramp up in lightness."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"cubehelix"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"CubeHelix colormap.  This map was designed be both a uniform ramp in\nlightness, and to contain a large number of hues.  As a result of the\nlinear ramp in lightness, it’s quite good at distinguishing small features\nin the image.  Due to the large number of hues, it does seem to break into\nsections — dark, green orange, purple, and blue."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Even among the d3 colormaps, I’m not keen on maps with a large number\nof hues even if they perform well on the test image.  The reason is\nthat in my own perception, I tend to split hues into different\ncategories.  I see shades of gray, but it’s all gray, which is good\nfor visualizing quantitative data.  With the multi-hued colormap such\nas CubeHelix for example, I see a sequence of separate hues, and I\nperceive the different hues to by qualitatively different."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"One way to visualize this is with another test image.  In this case I’m\ndisplaying an exponentially damped sine wave —  the result is a series\nof peaks and valleys where the peaks each summit at a different level."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"In grayscale or simple transition between two colors it looks like"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"expsin",cmap:"grayscale"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"Exponentially damped sine wave in grayscale."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"expsin",cmap:"bugn"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"Exponentially damped sine wave with the BuGn map from\nd3-scale-chromatic.  The peaks far from center seem a bit more visible\nthan they do in grayscale, but this is just due to the fact that BuGn\nis an inverted map, going from light to dark — as you look through\nthis page you’ll notice that small features always seem a bit more\ndiscernible on the light part of the maps."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"With multi-hued colormaps however, different rings seem to be qualitatively\ndifferent.  This effect is strongest with the CubeHelix colormap"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"expsin",cmap:"cubehelix"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"Exponentially damped sine with the d3-scale-chromatic CubeHelix colormap.\nNote that the inner circles each seem to be a qualitatively different color."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"d3-scale-chromatic also has a cyclical colormap which they call a Rainbow map.  It is designed to be significantly more pleasant than either the\nclassic rainbow or my own kludgy rainbow.  It does reasonable well for discerning small features.  The flat spots, however, are more pronounced than for most\nof the good linear maps."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"d3rainbow"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"d3 rainbow — the cyclical colormap provided by scale-chromatic."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"h2",properties:{},children:[{type:"text",value:"What’s the difference between good and bad colormaps?"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Before we circle around to constructing a nice cyclic colormap, I think we\nneed a better grip on why some colormaps work well for feature discrimination,\nand some do not.  Consider the following three maps:"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"rainbow"},children:[{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"br",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"inferno"},children:[{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"br",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"constant-lightness"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The top map is the classic rainbow, the middle map is the d3 inferno\nscale, and the bottom map is a colorwheel from the HCL space (polar\nvariant of CIELAB) with constant chroma and luminance.  I’m calling\nthe bottom map “constant lightness”."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"It seems to be generally accepted that the rainbow map is terrible\nbecause it is not perceptually uniform.  However, the constant\nlightness map "},{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"is"}]},{type:"text",value:" perceptually uniform and seems nearly as bad — if\nnot worse — than the rainbow map.  What gives?  Well, lets look\nagain, this time with a color bar below each map showing the grayscale\nversion of the map generated by taking the L component of each color\nin CIELAB space."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"rainbow",lmap:"true"},children:[{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"br",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"inferno",lmap:"true"},children:[{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"br",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"constant-lightness",lmap:"true"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"To my eyes, it sure looks like I am able to make out small scale features\nwhen the luminosity of the map is changing, and when the luminosity is\nnot changing, different hues are doing little for me.  This is particularly\nevident in the rainbow map, where the flat parts of the luminosity curve\ncorrespond exactly with the parts of the test image with poor discrimination\nability."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I take from this that while using a perceptually uniform map might be\nnice, it’s not actually all that important.  It does seem to be\nimportant, however, for the map to have a nice monotonically lightness\ncurve."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I’m not the first to have come to this conclusion.  Kovesi emphasizes\nit as well in his paper, and Mark Abeln has an incredible "},{type:"element",tagName:"a",properties:{href:"http://therefractedlight.blogspot.com/2010/06/luminance-is-more-important-than-color.html"},children:[{type:"text",value:"demo"}]},{type:"text",value:"\nof the same image with luminance removed, and with color removed.  You\nwant to look at it."}]},{type:"text",value:"\n"},{type:"element",tagName:"h2",properties:{},children:[{type:"text",value:"Let’s construct a cyclic colormap already"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"It’s been a bit of a journey, but everything is in place to construct a nice\nunconfusing cyclical colormap with a good ability to discriminate small features."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"We want:"}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"A simple lightness profile"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"No more than two colors"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The simple lightness profile will ensure our ability to discriminate small\nfeatures.  We need at least two colors to break the symmetry of a cyclical\ngrayscale map.  If we keep it exactly at two, we can minimize the tendency\nto view different colors as qualitatively different things."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapTestImage",type:"rake",cmap:"cyclic-demon",lmap:"true"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColorWheel",type:"cyclic-demon"},children:[{type:"text",value:"\n"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"So this is my super simple cyclical colormap.  In lightness, it’s a linear\nramp from black to white and then back to black.  I add a little red and\nblue to distinguish the left side of the cycle from the right side of the cycle."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"It’s not the prettiest map (the d3 rainbow map is arguably more attractive)\nbut it fulfills my primary objective of being able to discriminate small features are all parts of the scale.  So I kind of like it.  And that’s why is the\ndefault colormap for my "},{type:"element",tagName:"a",properties:{href:"/blog/2018/demon"},children:[{type:"text",value:"Cyclic Cellular Automaton"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"To generate the actual scale, I just use\n"},{type:"element",tagName:"a",properties:{href:"https://github.com/gka/chroma.js/"},children:[{type:"text",value:"chroma.js"}]},{type:"text",value:".  Applying\n"},{type:"element",tagName:"code",properties:{},children:[{type:"text",value:".correctLightness()"}]},{type:"text",value:" to the scales ensures a uniform ramp\nin lightness as the scale transitions between colors.  So I just need\nto create two scales and then stitch them together, one going from black to\nwhite via red and another scale that goes back by way of blue."}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-javascript"]},children:[{type:"element",tagName:"code",properties:{className:["language-javascript"]},children:[{type:"text",value:"    "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"this"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"scale1 "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" chroma"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"element",tagName:"span",properties:{className:["token","function"]},children:[{type:"text",value:"scale"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'black'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'red'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]
},children:[{type:"text",value:"'white'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n                        "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"element",tagName:"span",properties:{className:["token","function"]},children:[{type:"text",value:"correctLightness"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:";"}]},{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"this"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"scale2 "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" chroma"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"element",tagName:"span",properties:{className:["token","function"]},children:[{type:"text",value:"scale"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'black'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'blue'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'white'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n                        "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"element",tagName:"span",properties:{className:["token","function"]},children:[{type:"text",value:"correctLightness"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:";"}]}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I’ll leave you with a little widget you can use to select any of the colormaps\ndiscussed in this post."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"noscript",properties:{},children:[{type:"text",value:" NO JAVASCRIPT — NO COLORMAP (sorry)"}]},{type:"text",value:"\n"},{type:"element",tagName:"blog-colormap",properties:{reactclass:"ColormapSelector"},children:[]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"All of the code used to generate the images on this page are in a github\n"},{type:"element",tagName:"a",properties:{href:"https://github.com/dkirkman/ws-colormap"},children:[{type:"text",value:"repo"}]}]}],data:{quirksMode:!1}},fields:{tagSlugs:["/blog/tags/interactive-computation/","/blog/tags/data-science/"]},frontmatter:{title:"Constructing a cyclical colormap",tags:["interactive computation","data science"],date:"2018-05-17T00:00:00.000Z",description:"Designing an effective cyclical colormap is a bit tricky.  Can the recent trend of using perceptually uniform colorspaces produce a cyclical map that is both compelling and capable of discerning small features?"}}},pathContext:{slug:"/blog/2018/cyclical-colormaps/"}}}});
//# sourceMappingURL=path---blog-2018-cyclical-colormaps-5e66cda443e8ca49533f.js.map